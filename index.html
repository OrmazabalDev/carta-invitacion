<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <!-- BLOQUEO DE ZOOM: user-scalable=no y touch-action: manipulation -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>Invitación de Boda</title>

  <!-- ESTILOS (Tailwind CSS + Fuentes) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- CONFIGURACIÓN DE COLORES Y FUENTES -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            cream: '#FAF9F6',
            primary: '#2F4F4F',
            accent: '#4A5D4F',
            gold: '#D4C4A8',
            secondary: '#555555',
          },
          fontFamily: {
            serif: ['"Playfair Display"', 'serif'],
            sans: ['"Montserrat"', 'sans-serif'],
          }
        }
      }
    }
  </script>

  <style>
    /* Bloquea el rebote en iOS y la selección de texto */
    body { 
        overscroll-behavior: none; 
        -webkit-tap-highlight-color: transparent;
        user-select: none; /* No seleccionar texto */
        -webkit-user-select: none; /* Safari */
        touch-action: pan-y; /* Permite scroll vertical pero bloquea zoom */
    }
    
    /* Animaciones */
    .modal-enter { opacity: 0; transform: scale(0.95); pointer-events: none; }
    .modal-active { opacity: 1; transform: scale(1); pointer-events: auto; }
    .transition-modal { transition: all 0.3s ease-out; }
    .slider-track { will-change: transform; }
  </style>
</head>

<!-- Agregamos 'select-none' para prevenir copia en todo el cuerpo -->
<body class="bg-cream font-sans text-secondary antialiased h-[100dvh] overflow-hidden flex flex-col items-center relative select-none">

  <!-- Reduje padding vertical (py-2) y gap (gap-2) para compactar -->
  <main class="w-full max-w-[420px] h-full flex flex-col justify-start gap-2 px-5 py-2 z-10 transition-all duration-300" id="mainContent">
    
    <!-- ========================================== -->
    <!-- 1. CARRUSEL DE FOTOS (GALERÍA)             -->
    <!-- ========================================== -->
    <!-- Reduje la altura máxima a 25vh para ganar espacio -->
    <div class="flex-1 relative min-h-0 flex flex-col justify-start w-full shrink-0">
      <div class="border border-gold p-1.5 pb-0 border-b-0 rounded-t-sm h-full max-h-[25vh] w-full relative shadow-sm">
        <div class="w-full h-full overflow-hidden rounded-sm relative" id="sliderContainer">
            
            <div class="flex h-full transition-transform duration-500 ease-out slider-track" id="sliderTrack">
                <!-- FOTO 1 -->
                <div class="w-full h-full flex-shrink-0 bg-gray-200">
                    <img src="galeria/Frase_1.jpg" 
                         alt="Foto 1" class="w-full h-full object-cover object-top select-none pointer-events-none"
                         onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1628126786638-73599026d36e?q=80&w=1000&auto=format&fit=crop'">
                </div>
                <!-- FOTO 2 -->
                <div class="w-full h-full flex-shrink-0 bg-gray-200">
                    <img src="galeria/IMG-20251214-WA0004.jpg" 
                         alt="Foto 2" class="w-full h-full object-cover object-center select-none pointer-events-none"
                         onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?q=80&w=1000&auto=format&fit=crop'">
                </div>
                <!-- FOTO 3 -->
                <div class="w-full h-full flex-shrink-0 bg-gray-200">
                    <img src="galeria/IMG-20251214-WA0005.jpg" 
                         alt="Foto 3" class="w-full h-full object-cover object-center select-none pointer-events-none"
                         onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1511285560982-1351cdeb9821?q=80&w=1000&auto=format&fit=crop'">
                </div>
                <!-- FOTO 4 -->
                <div class="w-full h-full flex-shrink-0 bg-gray-200">
                    <img src="galeria/IMG-20251214-WA0006.jpg" 
                         alt="Foto 4" class="w-full h-full object-cover object-center select-none pointer-events-none"
                         onerror="this.onerror=null; this.src='https://images.unsplash.com/photo-1511285560982-1351cdeb9821?q=80&w=1000&auto=format&fit=crop'">
                </div>
            </div>

            <!-- Indicadores -->
            <div class="absolute bottom-2 left-0 right-0 flex justify-center gap-2 z-10" id="sliderDots">
                <button class="w-1.5 h-1.5 rounded-full bg-white transition-all duration-300 shadow opacity-100 scale-110" data-index="0"></button>
                <button class="w-1.5 h-1.5 rounded-full bg-white/60 transition-all duration-300 shadow hover:bg-white" data-index="1"></button>
                <button class="w-1.5 h-1.5 rounded-full bg-white/60 transition-all duration-300 shadow hover:bg-white" data-index="2"></button>
                <button class="w-1.5 h-1.5 rounded-full bg-white/60 transition-all duration-300 shadow hover:bg-white" data-index="3"></button>
            </div>
            <div class="absolute inset-0 z-0" id="touchArea"></div>
        </div>
      </div>
    </div>

    <!-- ========================================== -->
    <!-- 2. REPRODUCTOR DE MÚSICA                   -->
    <!-- ========================================== -->
    <!-- Subí más el margen negativo (-mt-5) para que "muerda" más la foto -->
    <div class="w-full shrink-0 flex justify-center items-center -mt-5 mb-1 z-20 px-2">
        <audio id="bgMusic" loop></audio>
        <div class="bg-white/95 backdrop-blur-md border border-gold/40 rounded-full shadow-md py-2 px-4 flex items-center justify-between gap-3 w-full max-w-[90%] transform transition-all">
            <div class="flex flex-col min-w-0">
                <span class="text-[8px] uppercase tracking-[0.2em] text-gold font-bold flex items-center gap-1">
                    <i class="fa-solid fa-music"></i> Nuestra canción
                </span>
                <span class="text-xs text-primary font-serif font-medium truncate block leading-tight">Somewhere Over The Rainbow</span>
            </div>
            <button onclick="toggleMusic()" id="musicBtn" class="w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center shrink-0 shadow-md hover:bg-accent hover:shadow-lg transition-all active:scale-95 group">
                <i class="fa-solid fa-play text-[10px] ml-0.5 group-hover:scale-110 transition-transform" id="musicIcon"></i>
            </button>
        </div>
    </div>

    <!-- ========================================== -->
    <!-- 3. ENCABEZADO                              -->
    <!-- ========================================== -->
    <header class="text-center shrink-0 w-full mb-1">
      <!-- Reduje tamaño de fuente del título a text-4xl -->
      <h1 class="font-serif text-4xl text-primary leading-none mb-1 tracking-tight" id="txtNombres">...</h1>
      <div class="text-[10px] font-bold uppercase tracking-[0.2em] text-gray-500 mb-1" id="txtFechaTexto">...</div>
      <p class="font-serif italic text-xs text-gray-400" id="txtFrase">...</p>
    </header>

    <!-- ========================================== -->
    <!-- 4. DETALLES (Ceremonia y Recepción)        -->
    <!-- ========================================== -->
    <!-- Gap reducido a gap-3 -->
    <section class="grid grid-cols-2 gap-3 shrink-0 w-full mb-1">
      <article class="bg-white p-2.5 rounded-lg border border-gray-100 shadow-sm flex flex-col items-center text-center gap-1 hover:shadow-md transition-shadow">
        <div class="flex items-center gap-1.5 mt-0.5">
            <i class="fa-solid fa-church text-gold text-xs"></i>
            <h3 class="font-serif text-sm text-primary font-bold">Ceremonia</h3>
        </div>
        <p class="text-xs text-gray-600 font-medium" id="txtHoraCeremonia">12:00 HRS</p>
        <button onclick="abrirMapa(CONFIG.mapaCeremonia)" class="w-full bg-primary/5 hover:bg-primary/10 text-primary text-[9px] font-bold py-1.5 px-2 rounded transition-colors flex items-center justify-center gap-1 mt-0.5">
            <i class="fa-solid fa-location-dot"></i> VER MAPA
        </button>
      </article>

      <article class="bg-white p-2.5 rounded-lg border border-gray-100 shadow-sm flex flex-col items-center text-center gap-1 hover:shadow-md transition-shadow">
        <div class="flex items-center gap-1.5 mt-0.5">
            <i class="fa-solid fa-glass-cheers text-gold text-xs"></i>
            <h3 class="font-serif text-sm text-primary font-bold">Recepción</h3>
        </div>
        <p class="text-xs text-gray-600 font-medium" id="txtHoraRecepcion">13:00 HRS</p>
        <button onclick="abrirMapa(CONFIG.mapaRecepcion)" class="w-full bg-primary/5 hover:bg-primary/10 text-primary text-[9px] font-bold py-1.5 px-2 rounded transition-colors flex items-center justify-center gap-1 mt-0.5">
            <i class="fa-solid fa-location-dot"></i> VER MAPA
        </button>
      </article>
    </section>

    <!-- ========================================== -->
    <!-- 5. BOTÓN RSVP                              -->
    <!-- ========================================== -->
    <section class="w-full shrink-0 text-center mb-1">
      <button onclick="toggleModal('modalRSVP')" class="w-full bg-primary text-white py-3 rounded-xl shadow-lg hover:bg-opacity-90 transition active:scale-[0.98] flex justify-center items-center gap-2 text-xs font-bold uppercase tracking-wider border border-accent">
        <i class="fa-solid fa-envelope-open-text text-base"></i> Responder Invitación
      </button>
      <p class="text-[9px] text-gray-400 mt-1.5 italic tracking-wide" id="txtFechaLimite">...</p>
    </section>

    <!-- ========================================== -->
    <!-- 6. BARRA DE UTILIDADES                     -->
    <!-- ========================================== -->
    <section class="flex justify-around items-center shrink-0 w-full px-2 border-t border-b border-gray-100 py-2 bg-white/60 backdrop-blur-sm rounded-xl mb-0.5">
      <!-- Botón Regalos (Ancho 50%) -->
      <button onclick="toggleModal('modalRegalos')" class="flex flex-col items-center gap-1 group w-1/2">
        <div class="w-8 h-8 rounded-full bg-gray-50 text-primary flex items-center justify-center border border-gray-200 group-hover:bg-accent group-hover:text-white transition shadow-sm">
          <i class="fa-solid fa-gift text-xs"></i>
        </div>
        <span class="text-[8px] font-bold uppercase tracking-wide text-gray-500 group-hover:text-accent">Regalos</span>
      </button>
      
      <!-- Botón Vestimenta (Ancho 50%) -->
      <button onclick="toggleModal('modalDress')" class="flex flex-col items-center gap-1 group w-1/2">
        <div class="w-8 h-8 rounded-full bg-gray-50 text-primary flex items-center justify-center border border-gray-200 group-hover:bg-accent group-hover:text-white transition shadow-sm">
          <i class="fa-solid fa-shirt text-xs"></i>
        </div>
        <span class="text-[8px] font-bold uppercase tracking-wide text-gray-500 group-hover:text-accent">Vestimenta</span>
      </button>
    </section>

    <!-- ========================================== -->
    <!-- 7. CONTADOR                                -->
    <!-- ========================================== -->
    <footer class="shrink-0 w-full pt-1 pb-1">
      <div class="flex justify-center items-center text-center space-x-4 text-primary">
        <div><span class="block font-serif text-xl leading-none font-bold" id="days">00</span><span class="text-[8px] text-gray-400 uppercase font-bold tracking-wider">Días</span></div>
        <div class="w-px h-6 bg-gray-200"></div>
        <div><span class="block font-serif text-xl leading-none font-bold" id="hours">00</span><span class="text-[8px] text-gray-400 uppercase font-bold tracking-wider">Hs</span></div>
        <div class="w-px h-6 bg-gray-200"></div>
        <div><span class="block font-serif text-xl leading-none font-bold" id="minutes">00</span><span class="text-[8px] text-gray-400 uppercase font-bold tracking-wider">Min</span></div>
        <div class="w-px h-6 bg-gray-200"></div>
        <div><span class="block font-serif text-xl leading-none font-bold" id="seconds">00</span><span class="text-[8px] text-gray-400 uppercase font-bold tracking-wider">Seg</span></div>
      </div>
    </footer>
  </main>

  <!-- ========================================== -->
  <!-- MODALES                                    -->
  <!-- ========================================== -->

  <!-- Modal RSVP -->
  <div id="modalRSVP" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm modal-enter transition-modal">
    <div class="bg-white rounded-lg shadow-2xl w-full max-w-md h-[80vh] relative flex flex-col">
        <button onclick="toggleModal('modalRSVP')" class="absolute top-2 right-2 text-gray-500 hover:text-red-500 p-2 z-10 bg-white/80 rounded-full shadow-sm"><i class="fa-solid fa-xmark text-xl"></i></button>
        <div class="p-3 border-b bg-cream rounded-t-lg">
            <h3 class="font-serif text-lg text-primary text-center font-bold">Confirmar Asistencia</h3>
        </div>
        <div class="flex-1 overflow-hidden relative bg-white">
             <div class="absolute inset-0 flex items-center justify-center text-gray-300 z-0" id="rsvpSpinner">
                <i class="fa-solid fa-circle-notch fa-spin text-3xl"></i>
             </div>
             <iframe id="iframeRSVP" src="" class="w-full h-full relative z-10" frameborder="0" marginheight="0" marginwidth="0" onload="document.getElementById('rsvpSpinner').style.display='none';">Cargando...</iframe>
        </div>
        <div class="p-2 text-center text-[10px] text-gray-400 border-t bg-gray-50 rounded-b-lg">
            ¿Problemas? <a href="#" onclick="window.open(CONFIG.formURL, '_blank')" class="underline text-primary font-bold">Abrir en nueva ventana</a>
        </div>
    </div>
  </div>

  <!-- Modal Regalos -->
  <div id="modalRegalos" class="fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/40 backdrop-blur-sm modal-enter transition-modal">
    <div class="bg-white p-6 rounded-lg shadow-2xl w-full max-w-sm text-center relative">
      <button onclick="toggleModal('modalRegalos')" class="absolute top-3 right-3 text-gray-400 hover:text-red-500 p-2"><i class="fa-solid fa-xmark text-xl"></i></button>
      <div class="w-12 h-12 bg-cream rounded-full flex items-center justify-center mx-auto mb-3 text-gold text-2xl"><i class="fa-solid fa-gift"></i></div>
      <h3 class="font-serif text-2xl text-primary mb-3">¿Qué regalarnos?</h3>
      <div class="bg-gray-50 p-4 rounded border border-gray-100">
        <p class="text-base text-gray-600 leading-relaxed font-medium italic">
          “Tranquilo o tranquila, la casa está completa. Les agradecemos su muestra de cariño con su presencia en apoyo de nuestro matrimonio.”
        </p>
      </div>
    </div>
  </div>

  <!-- Modal Etiqueta (MODIFICADO) -->
  <div id="modalDress" class="fixed inset-0 z-50 flex items-center justify-center p-6 bg-black/40 backdrop-blur-sm modal-enter transition-modal">
    <div class="bg-white p-6 rounded-lg shadow-2xl w-full max-w-sm text-center relative">
      <button onclick="toggleModal('modalDress')" class="absolute top-3 right-3 text-gray-400 hover:text-red-500 p-2"><i class="fa-solid fa-xmark text-xl"></i></button>
      <div class="w-12 h-12 bg-cream rounded-full flex items-center justify-center mx-auto mb-3 text-primary text-2xl"><i class="fa-solid fa-user-tie"></i></div>
      <h3 class="font-serif text-2xl text-primary mb-3">Código de Vestimenta</h3>
      <p class="text-accent text-base font-bold uppercase tracking-widest mb-4">Semiformal / acorde al evento</p>
      <!-- Se eliminaron los bloques de "Ellas" y "Ellos" -->
    </div>
  </div>

    <!-- ========================================== -->
    <!-- JAVASCRIPT GLOBAL (Funciones Accesibles)   -->
    <!-- ========================================== -->
    <script src="main.js"></script>
</body>
</html>